exploit_exec=exploit

CCFLAGS=-g

OBJS=chacha_prng.o procs_utils.o extraction_analysis.o

.PHONY: all modules install clean

all: modules install $(exploit_exec)

modules:
	cd drivers && $(MAKE) modules

%.o: %.c
	$(CC) $(CCFLAGS) -c $< -o $@

$(exploit_exec): $(OBJS) prng_exploit.c
	$(CC) $(CCFLAGS) $^ -o $@

install:
	cd drivers && $(MAKE) install

clean:
	rm -f $(exploit_exec) $(OBJS)
	cd drivers && $(MAKE) clean
